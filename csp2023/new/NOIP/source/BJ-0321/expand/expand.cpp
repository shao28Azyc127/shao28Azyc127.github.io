#include <iostream>
#define ll long long
using namespace std;
const int N=1e5,M=1e5;
int c,n,m,Q;
ll x[N+1],y[M+1],a[N+1],b[M+1];
int main()
{
	ios::sync_with_stdio(0);
	freopen("expand.in","r",stdin);
	freopen("expand.out","w",stdout);
	cin>>c>>n>>m>>Q;
	int i,j,p,q,k1,k2;
	int tmp;
	bool flag;
	for(i=1;i<=n;i++)
		cin>>x[i];
	for(i=1;i<=m;i++)
		cin>>y[i];
	if(n<=2e3 && m<=2e3)
	{
		flag=1;
		if(x[1]==y[1])
			cout<<0;
		if(x[1]>y[1])
			{
				tmp=1;
				for(i=1;i<=n;i++)
				{
					while(x[i]<=y[tmp])
					{
						tmp++;
						if(tmp>m)
						{
							flag=0;
							break;
						}
					}
				}
				tmp=1;
				for(i=1;i<=m;i++)
				{
					while(y[i]>=x[tmp])
					{
						tmp++;
						if(tmp>n)
						{
							flag=0;
							break;
						}
					}
				}
				if(!flag)
					cout<<0;
				else
					cout<<1;
			}
			else if(x[1]<y[1])
			{
				tmp=1;
				for(i=1;i<=n;i++)
				{
					while(x[i]>=y[tmp])
					{
						tmp++;
						if(tmp>m)
						{
							flag=0;
							break;
						}
					}
				}
				tmp=1;
				for(i=1;i<=m;i++)
				{
					while(y[i]<=x[tmp])
					{
						tmp++;
						if(tmp>n)
						{
							flag=0;
							break;
						}
					}
				}
				if(!flag)
					cout<<0;
				else
					cout<<1;
			}
		while(Q--)
		{
			flag=1;
			for(i=1;i<=n;i++)
				a[i]=x[i];
			for(i=1;i<=m;i++)
				b[i]=y[i];
			cin>>p>>q;
			for(i=1;i<=p;i++)
			{
				cin>>k1>>k2;
				a[k1]=k2;
			}
			for(i=1;i<=q;i++)
			{
				cin>>k1>>k2;
				b[k1]=k2;
			}
			if(a[1]==b[1])
			{
				cout<<0;
				continue;
			}
			if(a[1]>b[1])
			{
				tmp=1;
				for(i=1;i<=n;i++)
				{
					while(a[i]<=b[tmp])
					{
						tmp++;
						if(tmp>m)
						{
							flag=0;
							break;
						}
					}
				}
				if(!flag)
				{
					cout<<0;
					continue;
				}
				tmp=1;
				for(i=1;i<=m;i++)
				{
					while(b[i]>=a[tmp])
					{
						tmp++;
						if(tmp>n)
						{
							flag=0;
							break;
						}
					}
				}
				if(!flag)
					cout<<0;
				else
					cout<<1;
			}
			else if(a[1]<b[1])
			{
				tmp=1;
				for(i=1;i<=n;i++)
				{
					while(a[i]>=b[tmp])
					{
						tmp++;
						if(tmp>m)
						{
							flag=0;
							break;
						}
					}
				}
				if(!flag)
				{
					cout<<0;
					continue;
				}
				tmp=1;
				for(i=1;i<=m;i++)
				{
					while(b[i]<=a[tmp])
					{
						tmp++;
						if(tmp>n)
						{
							flag=0;
							break;
						}
					}
				}
				if(!flag)
					cout<<0;
				else
					cout<<1;
			}
		}
	}
	return 0;
}